% Get coordinates of ith vertex
% i getvertex
/getvertex {
	% i on stack
	/theta exch 360 mul p div def
	theta cos radius mul ctr_x sum
	theta sin radius mul ctr_y sum
} def

% p center_x center_y radius drawpaley
/drawpaley {
	/radius exch def
	/ctr_y exch def
	/ctr_x exch def
	/p exch def

	% Define visited array to mark which edges have been drawn
	/visited p array def
	0 1 p {
		/row p array def
		0 1 p {
			row exch false put
		} for
		visited exch row put
	} for
	
	newpath
	
	0 1 p {
		/i exch def
		1 1 p 1 sub 2 idiv {
			/j exch 2 exp i sum p mod def
			visited i get j get {
				i getvertex moveto
				j getvertex lineto
				visited i get j true put
				visited j get i true put
			} if
		} for
	} for
	
	stroke
	
} def

17 306 396 100 drawpaley

showpage
